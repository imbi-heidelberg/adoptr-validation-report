<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Validation Report for adoptr package</title>
  <meta name="description" content="This is an automatically generated validation report for the adoptr R package published via bookdown.">
  <meta name="generator" content="bookdown  and GitBook 2.6.7">

  <meta property="og:title" content="Validation Report for adoptr package" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="This is an automatically generated validation report for the adoptr R package published via bookdown." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Validation Report for adoptr package" />
  
  <meta name="twitter:description" content="This is an automatically generated validation report for the adoptr R package published via bookdown." />
  

<meta name="author" content="Kevin Kunzmann &amp; Maximilian Pilz">


<meta name="date" content="2019-04-02">

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  

<link rel="next" href="scenarioI.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />









<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; position: absolute; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; }
pre.numberSource a.sourceLine:empty
  { position: absolute; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: absolute; left: -5em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Validation Report for adoptr Package</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduction</a><ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#concept"><i class="fa fa-check"></i><b>1.1</b> Concept</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#creating-a-local-validation-report"><i class="fa fa-check"></i><b>1.2</b> Creating a Local Validation Report</a></li>
<li class="chapter" data-level="1.3" data-path="index.html"><a href="index.html#validation-scenarios"><i class="fa fa-check"></i><b>1.3</b> Validation Scenarios</a><ul>
<li class="chapter" data-level="1.3.1" data-path="index.html"><a href="index.html#scenario-i-large-effect-point-prior"><i class="fa fa-check"></i><b>1.3.1</b> <a href="scenarioI.html#scenarioI">Scenario I: Large effect, point prior</a></a></li>
<li class="chapter" data-level="1.3.2" data-path="index.html"><a href="index.html#scenario-ii-large-effect-gaussian-prior"><i class="fa fa-check"></i><b>1.3.2</b> <a href="scenarioII.html#scenarioII">Scenario II: Large effect, Gaussian prior</a></a></li>
<li class="chapter" data-level="1.3.3" data-path="index.html"><a href="index.html#scenario-iii-large-effect-uniform-prior"><i class="fa fa-check"></i><b>1.3.3</b> <a href="scenarioIII.html#scenarioIII">Scenario III: Large effect, uniform prior</a></a></li>
<li class="chapter" data-level="1.3.4" data-path="index.html"><a href="index.html#scenario-iv-smaller-effect-size-larger-trials"><i class="fa fa-check"></i><b>1.3.4</b> <a href="scenarioIV.html#scenarioIV">Scenario IV: Smaller effect size, larger trials</a></a></li>
<li class="chapter" data-level="1.3.5" data-path="index.html"><a href="index.html#scenario-v-single-arm-design-medium-effect-size"><i class="fa fa-check"></i><b>1.3.5</b> <a href="scenarioV.html#scenarioV">Scenario V: Single-arm design, medium effect size</a></a></li>
</ul></li>
<li class="chapter" data-level="1.4" data-path="index.html"><a href="index.html#technical-setup"><i class="fa fa-check"></i><b>1.4</b> Technical Setup</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="scenarioI.html"><a href="scenarioI.html"><i class="fa fa-check"></i><b>2</b> Scenario I: large effect, point prior</a><ul>
<li class="chapter" data-level="2.1" data-path="scenarioI.html"><a href="scenarioI.html#details"><i class="fa fa-check"></i><b>2.1</b> Details</a><ul>
<li class="chapter" data-level="2.1.1" data-path="scenarioI.html"><a href="scenarioI.html#data-distribution"><i class="fa fa-check"></i><b>2.1.1</b> Data distribution</a></li>
<li class="chapter" data-level="2.1.2" data-path="scenarioI.html"><a href="scenarioI.html#null-hypothesis"><i class="fa fa-check"></i><b>2.1.2</b> Null hypothesis</a></li>
<li class="chapter" data-level="2.1.3" data-path="scenarioI.html"><a href="scenarioI.html#prior-assumptions"><i class="fa fa-check"></i><b>2.1.3</b> Prior assumptions</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="scenarioI.html"><a href="scenarioI.html#variantI_1"><i class="fa fa-check"></i><b>2.2</b> Variant I-1: Minimizing Expected Sample Size under Point Prior</a><ul>
<li class="chapter" data-level="2.2.1" data-path="scenarioI.html"><a href="scenarioI.html#objective"><i class="fa fa-check"></i><b>2.2.1</b> Objective</a></li>
<li class="chapter" data-level="2.2.2" data-path="scenarioI.html"><a href="scenarioI.html#constrains"><i class="fa fa-check"></i><b>2.2.2</b> Constrains</a></li>
<li class="chapter" data-level="2.2.3" data-path="scenarioI.html"><a href="scenarioI.html#initial-design"><i class="fa fa-check"></i><b>2.2.3</b> Initial Design</a></li>
<li class="chapter" data-level="2.2.4" data-path="scenarioI.html"><a href="scenarioI.html#optimization"><i class="fa fa-check"></i><b>2.2.4</b> Optimization</a></li>
<li class="chapter" data-level="2.2.5" data-path="scenarioI.html"><a href="scenarioI.html#test-cases"><i class="fa fa-check"></i><b>2.2.5</b> Test Cases</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="scenarioI.html"><a href="scenarioI.html#variantI_2"><i class="fa fa-check"></i><b>2.3</b> Variant I-2: Minimizing Expected Sample Size under Null Hypothesis</a><ul>
<li class="chapter" data-level="2.3.1" data-path="scenarioI.html"><a href="scenarioI.html#objective-1"><i class="fa fa-check"></i><b>2.3.1</b> Objective</a></li>
<li class="chapter" data-level="2.3.2" data-path="scenarioI.html"><a href="scenarioI.html#constrains-1"><i class="fa fa-check"></i><b>2.3.2</b> Constrains</a></li>
<li class="chapter" data-level="2.3.3" data-path="scenarioI.html"><a href="scenarioI.html#initial-design-1"><i class="fa fa-check"></i><b>2.3.3</b> Initial Design</a></li>
<li class="chapter" data-level="2.3.4" data-path="scenarioI.html"><a href="scenarioI.html#optimization-1"><i class="fa fa-check"></i><b>2.3.4</b> Optimization</a></li>
<li class="chapter" data-level="2.3.5" data-path="scenarioI.html"><a href="scenarioI.html#test-cases-1"><i class="fa fa-check"></i><b>2.3.5</b> Test Cases</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="scenarioI.html"><a href="scenarioI.html#variantI_3"><i class="fa fa-check"></i><b>2.4</b> Variant I-3: Conditional Power Constraint</a><ul>
<li class="chapter" data-level="2.4.1" data-path="scenarioI.html"><a href="scenarioI.html#objective-2"><i class="fa fa-check"></i><b>2.4.1</b> Objective</a></li>
<li class="chapter" data-level="2.4.2" data-path="scenarioI.html"><a href="scenarioI.html#constrains-2"><i class="fa fa-check"></i><b>2.4.2</b> Constrains</a></li>
<li class="chapter" data-level="2.4.3" data-path="scenarioI.html"><a href="scenarioI.html#initial-design-2"><i class="fa fa-check"></i><b>2.4.3</b> Initial Design</a></li>
<li class="chapter" data-level="2.4.4" data-path="scenarioI.html"><a href="scenarioI.html#optimization-2"><i class="fa fa-check"></i><b>2.4.4</b> Optimization</a></li>
<li class="chapter" data-level="2.4.5" data-path="scenarioI.html"><a href="scenarioI.html#test-cases-2"><i class="fa fa-check"></i><b>2.4.5</b> Test Cases</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="scenarioI.html"><a href="scenarioI.html#plot-two-stage-designs"><i class="fa fa-check"></i><b>2.5</b> Plot Two-Stage Designs</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="scenarioII.html"><a href="scenarioII.html"><i class="fa fa-check"></i><b>3</b> Scenario II: Large effect, Gaussian prior</a><ul>
<li class="chapter" data-level="3.1" data-path="scenarioII.html"><a href="scenarioII.html#details-1"><i class="fa fa-check"></i><b>3.1</b> Details</a><ul>
<li class="chapter" data-level="3.1.1" data-path="scenarioII.html"><a href="scenarioII.html#data-distribution-1"><i class="fa fa-check"></i><b>3.1.1</b> Data distribution</a></li>
<li class="chapter" data-level="3.1.2" data-path="scenarioII.html"><a href="scenarioII.html#null-hypothesis-1"><i class="fa fa-check"></i><b>3.1.2</b> Null hypothesis</a></li>
<li class="chapter" data-level="3.1.3" data-path="scenarioII.html"><a href="scenarioII.html#prior-assumptions-1"><i class="fa fa-check"></i><b>3.1.3</b> Prior assumptions</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="scenarioII.html"><a href="scenarioII.html#variantII_1"><i class="fa fa-check"></i><b>3.2</b> Variant II-1: Minimizing Expected Sample Size under Point Prior</a><ul>
<li class="chapter" data-level="3.2.1" data-path="scenarioII.html"><a href="scenarioII.html#objective-3"><i class="fa fa-check"></i><b>3.2.1</b> Objective</a></li>
<li class="chapter" data-level="3.2.2" data-path="scenarioII.html"><a href="scenarioII.html#constrains-3"><i class="fa fa-check"></i><b>3.2.2</b> Constrains</a></li>
<li class="chapter" data-level="3.2.3" data-path="scenarioII.html"><a href="scenarioII.html#initial-design-3"><i class="fa fa-check"></i><b>3.2.3</b> Initial Design</a></li>
<li class="chapter" data-level="3.2.4" data-path="scenarioII.html"><a href="scenarioII.html#optimization-3"><i class="fa fa-check"></i><b>3.2.4</b> Optimization</a></li>
<li class="chapter" data-level="3.2.5" data-path="scenarioII.html"><a href="scenarioII.html#test-cases-3"><i class="fa fa-check"></i><b>3.2.5</b> Test Cases</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="scenarioII.html"><a href="scenarioII.html#variantII_2"><i class="fa fa-check"></i><b>3.3</b> Variant II-2: Minimizing Expected Sample Size under Null Hypothesis</a><ul>
<li class="chapter" data-level="3.3.1" data-path="scenarioII.html"><a href="scenarioII.html#objective-4"><i class="fa fa-check"></i><b>3.3.1</b> Objective</a></li>
<li class="chapter" data-level="3.3.2" data-path="scenarioII.html"><a href="scenarioII.html#constrains-4"><i class="fa fa-check"></i><b>3.3.2</b> Constrains</a></li>
<li class="chapter" data-level="3.3.3" data-path="scenarioII.html"><a href="scenarioII.html#initial-design-4"><i class="fa fa-check"></i><b>3.3.3</b> Initial Design</a></li>
<li class="chapter" data-level="3.3.4" data-path="scenarioII.html"><a href="scenarioII.html#optimization-4"><i class="fa fa-check"></i><b>3.3.4</b> Optimization</a></li>
<li class="chapter" data-level="3.3.5" data-path="scenarioII.html"><a href="scenarioII.html#test-cases-4"><i class="fa fa-check"></i><b>3.3.5</b> Test Cases</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="scenarioII.html"><a href="scenarioII.html#variantII_3"><i class="fa fa-check"></i><b>3.4</b> Variant II-3: Conditional Power Constraint</a><ul>
<li class="chapter" data-level="3.4.1" data-path="scenarioII.html"><a href="scenarioII.html#objective-5"><i class="fa fa-check"></i><b>3.4.1</b> Objective</a></li>
<li class="chapter" data-level="3.4.2" data-path="scenarioII.html"><a href="scenarioII.html#constrains-5"><i class="fa fa-check"></i><b>3.4.2</b> Constrains</a></li>
<li class="chapter" data-level="3.4.3" data-path="scenarioII.html"><a href="scenarioII.html#initial-design-5"><i class="fa fa-check"></i><b>3.4.3</b> Initial Design</a></li>
<li class="chapter" data-level="3.4.4" data-path="scenarioII.html"><a href="scenarioII.html#optimization-5"><i class="fa fa-check"></i><b>3.4.4</b> Optimization</a></li>
<li class="chapter" data-level="3.4.5" data-path="scenarioII.html"><a href="scenarioII.html#test-cases-5"><i class="fa fa-check"></i><b>3.4.5</b> Test Cases</a></li>
</ul></li>
<li class="chapter" data-level="3.5" data-path="scenarioII.html"><a href="scenarioII.html#plot-two-stage-designs-1"><i class="fa fa-check"></i><b>3.5</b> Plot Two-Stage Designs</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="scenarioIII.html"><a href="scenarioIII.html"><i class="fa fa-check"></i><b>4</b> Scenario III: large effect, uniform prior</a><ul>
<li class="chapter" data-level="4.1" data-path="scenarioIII.html"><a href="scenarioIII.html#details-2"><i class="fa fa-check"></i><b>4.1</b> Details</a><ul>
<li class="chapter" data-level="4.1.1" data-path="scenarioIII.html"><a href="scenarioIII.html#data-distribution-2"><i class="fa fa-check"></i><b>4.1.1</b> Data distribution</a></li>
<li class="chapter" data-level="4.1.2" data-path="scenarioIII.html"><a href="scenarioIII.html#null-hypothesis-2"><i class="fa fa-check"></i><b>4.1.2</b> Null hypothesis</a></li>
<li class="chapter" data-level="4.1.3" data-path="scenarioIII.html"><a href="scenarioIII.html#prior-assumptions-2"><i class="fa fa-check"></i><b>4.1.3</b> Prior assumptions</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="scenarioIII.html"><a href="scenarioIII.html#variantIII_1"><i class="fa fa-check"></i><b>4.2</b> Variant III.1: Convergence under prior concentration</a><ul>
<li class="chapter" data-level="4.2.1" data-path="scenarioIII.html"><a href="scenarioIII.html#objective-6"><i class="fa fa-check"></i><b>4.2.1</b> Objective</a></li>
<li class="chapter" data-level="4.2.2" data-path="scenarioIII.html"><a href="scenarioIII.html#constrains-6"><i class="fa fa-check"></i><b>4.2.2</b> Constrains</a></li>
<li class="chapter" data-level="4.2.3" data-path="scenarioIII.html"><a href="scenarioIII.html#optimization-problem"><i class="fa fa-check"></i><b>4.2.3</b> Optimization problem</a></li>
<li class="chapter" data-level="4.2.4" data-path="scenarioIII.html"><a href="scenarioIII.html#test-cases-6"><i class="fa fa-check"></i><b>4.2.4</b> Test cases</a></li>
<li class="chapter" data-level="4.2.5" data-path="scenarioIII.html"><a href="scenarioIII.html#plot-designs"><i class="fa fa-check"></i><b>4.2.5</b> Plot designs</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="scenarioIV.html"><a href="scenarioIV.html"><i class="fa fa-check"></i><b>5</b> Scenario IV: smaller effect, point prior</a><ul>
<li class="chapter" data-level="5.1" data-path="scenarioIV.html"><a href="scenarioIV.html#details-3"><i class="fa fa-check"></i><b>5.1</b> Details</a><ul>
<li class="chapter" data-level="5.1.1" data-path="scenarioIV.html"><a href="scenarioIV.html#data-distribution-3"><i class="fa fa-check"></i><b>5.1.1</b> Data distribution</a></li>
<li class="chapter" data-level="5.1.2" data-path="scenarioIV.html"><a href="scenarioIV.html#null-hypothesis-3"><i class="fa fa-check"></i><b>5.1.2</b> Null hypothesis</a></li>
<li class="chapter" data-level="5.1.3" data-path="scenarioIV.html"><a href="scenarioIV.html#prior-assumptions-3"><i class="fa fa-check"></i><b>5.1.3</b> Prior assumptions</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="scenarioIV.html"><a href="scenarioIV.html#variantIV_1"><i class="fa fa-check"></i><b>5.2</b> Variant IV-1: Minimizing Expected Sample Size under Point Prior</a><ul>
<li class="chapter" data-level="5.2.1" data-path="scenarioIV.html"><a href="scenarioIV.html#objective-7"><i class="fa fa-check"></i><b>5.2.1</b> Objective</a></li>
<li class="chapter" data-level="5.2.2" data-path="scenarioIV.html"><a href="scenarioIV.html#constrains-7"><i class="fa fa-check"></i><b>5.2.2</b> Constrains</a></li>
<li class="chapter" data-level="5.2.3" data-path="scenarioIV.html"><a href="scenarioIV.html#initial-design-6"><i class="fa fa-check"></i><b>5.2.3</b> Initial Design</a></li>
<li class="chapter" data-level="5.2.4" data-path="scenarioIV.html"><a href="scenarioIV.html#optimization-6"><i class="fa fa-check"></i><b>5.2.4</b> Optimization</a></li>
<li class="chapter" data-level="5.2.5" data-path="scenarioIV.html"><a href="scenarioIV.html#test-cases-7"><i class="fa fa-check"></i><b>5.2.5</b> Test Cases</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="scenarioIV.html"><a href="scenarioIV.html#variantIV_2"><i class="fa fa-check"></i><b>5.3</b> Variant IV-2: Increase Power</a><ul>
<li class="chapter" data-level="5.3.1" data-path="scenarioIV.html"><a href="scenarioIV.html#objective-8"><i class="fa fa-check"></i><b>5.3.1</b> Objective</a></li>
<li class="chapter" data-level="5.3.2" data-path="scenarioIV.html"><a href="scenarioIV.html#constrains-8"><i class="fa fa-check"></i><b>5.3.2</b> Constrains</a></li>
<li class="chapter" data-level="5.3.3" data-path="scenarioIV.html"><a href="scenarioIV.html#initial-design-7"><i class="fa fa-check"></i><b>5.3.3</b> Initial Design</a></li>
<li class="chapter" data-level="5.3.4" data-path="scenarioIV.html"><a href="scenarioIV.html#optimization-7"><i class="fa fa-check"></i><b>5.3.4</b> Optimization</a></li>
<li class="chapter" data-level="5.3.5" data-path="scenarioIV.html"><a href="scenarioIV.html#test-cases-8"><i class="fa fa-check"></i><b>5.3.5</b> Test Cases</a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="scenarioIV.html"><a href="scenarioIV.html#variantIV_3"><i class="fa fa-check"></i><b>5.4</b> Variant IV-3: Increase Type One Error rate</a><ul>
<li class="chapter" data-level="5.4.1" data-path="scenarioIV.html"><a href="scenarioIV.html#objective-9"><i class="fa fa-check"></i><b>5.4.1</b> Objective</a></li>
<li class="chapter" data-level="5.4.2" data-path="scenarioIV.html"><a href="scenarioIV.html#constrains-9"><i class="fa fa-check"></i><b>5.4.2</b> Constrains</a></li>
<li class="chapter" data-level="5.4.3" data-path="scenarioIV.html"><a href="scenarioIV.html#initial-design-8"><i class="fa fa-check"></i><b>5.4.3</b> Initial Design</a></li>
<li class="chapter" data-level="5.4.4" data-path="scenarioIV.html"><a href="scenarioIV.html#optimization-8"><i class="fa fa-check"></i><b>5.4.4</b> Optimization</a></li>
<li class="chapter" data-level="5.4.5" data-path="scenarioIV.html"><a href="scenarioIV.html#test-cases-9"><i class="fa fa-check"></i><b>5.4.5</b> Test Cases</a></li>
</ul></li>
<li class="chapter" data-level="5.5" data-path="scenarioIV.html"><a href="scenarioIV.html#plot-two-stage-designs-2"><i class="fa fa-check"></i><b>5.5</b> Plot Two-Stage Designs</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="scenarioV.html"><a href="scenarioV.html"><i class="fa fa-check"></i><b>6</b> Scenario V: Single-arm design, medium effect size</a><ul>
<li class="chapter" data-level="6.1" data-path="scenarioV.html"><a href="scenarioV.html#details-4"><i class="fa fa-check"></i><b>6.1</b> Details</a><ul>
<li class="chapter" data-level="6.1.1" data-path="scenarioV.html"><a href="scenarioV.html#data-distribution-4"><i class="fa fa-check"></i><b>6.1.1</b> Data distribution</a></li>
<li class="chapter" data-level="6.1.2" data-path="scenarioV.html"><a href="scenarioV.html#null-hypothesis-4"><i class="fa fa-check"></i><b>6.1.2</b> Null hypothesis</a></li>
<li class="chapter" data-level="6.1.3" data-path="scenarioV.html"><a href="scenarioV.html#prior-assumptions-4"><i class="fa fa-check"></i><b>6.1.3</b> Prior assumptions</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="scenarioV.html"><a href="scenarioV.html#variantV_1"><i class="fa fa-check"></i><b>6.2</b> Variant V-1, sensitivity to integration order</a><ul>
<li class="chapter" data-level="6.2.1" data-path="scenarioV.html"><a href="scenarioV.html#objective-10"><i class="fa fa-check"></i><b>6.2.1</b> Objective</a></li>
<li class="chapter" data-level="6.2.2" data-path="scenarioV.html"><a href="scenarioV.html#constrains-10"><i class="fa fa-check"></i><b>6.2.2</b> Constrains</a></li>
<li class="chapter" data-level="6.2.3" data-path="scenarioV.html"><a href="scenarioV.html#initial-design-9"><i class="fa fa-check"></i><b>6.2.3</b> Initial Design</a></li>
<li class="chapter" data-level="6.2.4" data-path="scenarioV.html"><a href="scenarioV.html#optimization-9"><i class="fa fa-check"></i><b>6.2.4</b> Optimization</a></li>
<li class="chapter" data-level="6.2.5" data-path="scenarioV.html"><a href="scenarioV.html#test-cases-10"><i class="fa fa-check"></i><b>6.2.5</b> Test cases</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="scenarioV.html"><a href="scenarioV.html#variantV_2"><i class="fa fa-check"></i><b>6.3</b> Variant V-2, utility maximization</a><ul>
<li class="chapter" data-level="6.3.1" data-path="scenarioV.html"><a href="scenarioV.html#objective-11"><i class="fa fa-check"></i><b>6.3.1</b> Objective</a></li>
<li class="chapter" data-level="6.3.2" data-path="scenarioV.html"><a href="scenarioV.html#constrains-11"><i class="fa fa-check"></i><b>6.3.2</b> Constrains</a></li>
<li class="chapter" data-level="6.3.3" data-path="scenarioV.html"><a href="scenarioV.html#initial-design-10"><i class="fa fa-check"></i><b>6.3.3</b> Initial Design</a></li>
<li class="chapter" data-level="6.3.4" data-path="scenarioV.html"><a href="scenarioV.html#optimization-10"><i class="fa fa-check"></i><b>6.3.4</b> Optimization</a></li>
<li class="chapter" data-level="6.3.5" data-path="scenarioV.html"><a href="scenarioV.html#test-cases-11"><i class="fa fa-check"></i><b>6.3.5</b> Test cases</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="scenarioV.html"><a href="scenarioV.html#variantV_3"><i class="fa fa-check"></i><b>6.4</b> Variant V-3, n1-penalty</a><ul>
<li class="chapter" data-level="6.4.1" data-path="scenarioV.html"><a href="scenarioV.html#objective-12"><i class="fa fa-check"></i><b>6.4.1</b> Objective</a></li>
<li class="chapter" data-level="6.4.2" data-path="scenarioV.html"><a href="scenarioV.html#constrains-12"><i class="fa fa-check"></i><b>6.4.2</b> Constrains</a></li>
<li class="chapter" data-level="6.4.3" data-path="scenarioV.html"><a href="scenarioV.html#initial-design-11"><i class="fa fa-check"></i><b>6.4.3</b> Initial Design</a></li>
<li class="chapter" data-level="6.4.4" data-path="scenarioV.html"><a href="scenarioV.html#optimization-11"><i class="fa fa-check"></i><b>6.4.4</b> Optimization</a></li>
<li class="chapter" data-level="6.4.5" data-path="scenarioV.html"><a href="scenarioV.html#test-cases-12"><i class="fa fa-check"></i><b>6.4.5</b> Test cases</a></li>
</ul></li>
<li class="chapter" data-level="6.5" data-path="scenarioV.html"><a href="scenarioV.html#variantV_4"><i class="fa fa-check"></i><b>6.5</b> Variant V-4, n2-penalty</a><ul>
<li class="chapter" data-level="6.5.1" data-path="scenarioV.html"><a href="scenarioV.html#objective-13"><i class="fa fa-check"></i><b>6.5.1</b> Objective</a></li>
<li class="chapter" data-level="6.5.2" data-path="scenarioV.html"><a href="scenarioV.html#constrains-13"><i class="fa fa-check"></i><b>6.5.2</b> Constrains</a></li>
<li class="chapter" data-level="6.5.3" data-path="scenarioV.html"><a href="scenarioV.html#initial-design-12"><i class="fa fa-check"></i><b>6.5.3</b> Initial Design</a></li>
<li class="chapter" data-level="6.5.4" data-path="scenarioV.html"><a href="scenarioV.html#optimization-12"><i class="fa fa-check"></i><b>6.5.4</b> Optimization</a></li>
<li class="chapter" data-level="6.5.5" data-path="scenarioV.html"><a href="scenarioV.html#test-cases-13"><i class="fa fa-check"></i><b>6.5.5</b> Test cases</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Validation Report for <strong>adoptr</strong> package</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="header">
<h1 class="title">Validation Report for <strong>adoptr</strong> package</h1>
<p class="author"><em>Kevin Kunzmann &amp; Maximilian Pilz</em></p>
<p class="date"><em>2019-04-02</em></p>
</div>
<div id="introduction" class="section level1">
<h1><span class="header-section-number">1</span> Introduction</h1>
<div id="concept" class="section level2">
<h2><span class="header-section-number">1.1</span> Concept</h2>
<p>R package validation for regulatory environments is a tedious endevour.
Note that there is no such thing as a ‘validated R package’:
validation is by definition a process conducted by the <em>user</em>.
This valdation report may thus only be seen as a means to facilitate
validation of <strong><a href="https://github.com/kkmann/adoptr">adoptr</a></strong> as much as possible.
No warranty whatsoever as to the correctness of <strong>adoptr</strong> not the
completeness of the validation report are given by the authors!</p>
<p>We assume that the reader is familiar with the notation an theoretical
background of <strong>adoptr</strong>.
Otherwise, the resources linked at <a href="https://github.com/kkmann/adoptr" class="uri">https://github.com/kkmann/adoptr</a> might
be a good starting point <em>ToDo: publications</em>.
The report explores a variety of essential scenarios and both formally
tests results (wherever possible) using <strong>testthat</strong>.
Detailed results are also printed in the report itself.
Any failure of the integrated formal tests will cause the build status
of the validation report to switch from ‘passing’ to ‘failed’.
An overview of the respective test scenarios is given in <a href="index.html#validation-scenarios">Validation Scenarios</a>.</p>
<p>The online version of this report can be found at
<a href="https://kkmann.github.io/adoptr-validation-report/" class="uri">https://kkmann.github.io/adoptr-validation-report/</a> and is automatically
rebuild and redeployed on a daily basis using Travis-CI.
It uses the respective most current CRAN version of <strong>adoptr</strong> (cf. below).
The source code repository of this report can be found at
<a href="https://github.com/kkmann/adoptr-validation-report" class="uri">https://github.com/kkmann/adoptr-validation-report</a>.</p>
<p>The following quality metrics are inspired by <a href="https://www.pharmar.org/packages/" class="uri">https://www.pharmar.org/packages/</a>:</p>
<table>
<colgroup>
<col width="63%" />
<col width="36%" />
</colgroup>
<thead>
<tr class="header">
<th align="right"><strong>Metric</strong></th>
<th align="left"><strong>Value/Statement</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right"><strong>Vignette?</strong></td>
<td align="left">yes, online version at <a href="https://kkmann.github.io/adoptr/articles/adoptr.html" class="uri">https://kkmann.github.io/adoptr/articles/adoptr.html</a></td>
</tr>
<tr class="even">
<td align="right"><strong>Website?</strong></td>
<td align="left">yes, <a href="https://kkmann.github.io/adoptr" class="uri">https://kkmann.github.io/adoptr</a></td>
</tr>
<tr class="odd">
<td align="right"><strong>Version Control?</strong></td>
<td align="left">yes, <a href="https:github.com/kkmann" class="uri">https:github.com/kkmann</a></td>
</tr>
<tr class="even">
<td align="right"><strong>Public/Open Source Developmen?</strong></td>
<td align="left">yes, <a href="https:github.com/kkmann" class="uri">https:github.com/kkmann</a></td>
</tr>
<tr class="odd">
<td align="right"><strong>Formal Bug Tracking?</strong></td>
<td align="left">yes, <a href="https://github.com/kkmann/adoptr/issues" class="uri">https://github.com/kkmann/adoptr/issues</a></td>
</tr>
<tr class="even">
<td align="right"><strong>Changelog?</strong></td>
<td align="left">yes, <a href="https://kkmann.github.io/adoptr/news/index.html" class="uri">https://kkmann.github.io/adoptr/news/index.html</a></td>
</tr>
<tr class="odd">
<td align="right"><strong>Release Cycle</strong></td>
<td align="left">irregular</td>
</tr>
<tr class="even">
<td align="right"><strong>Unit Testing?</strong></td>
<td align="left">yes, <a href="https://codecov.io/gh/kkmann/adoptr?branch=master"><img src="https://codecov.io/gh/kkmann/adoptr/branch/master/graph/badge.svg" alt="Codecov test coverage" /></a></td>
</tr>
<tr class="odd">
<td align="right"><strong>License</strong></td>
<td align="left">MIT, <a href="https://github.com/kkmann/adoptr/blob/master/LICENSE.md" class="uri">https://github.com/kkmann/adoptr/blob/master/LICENSE.md</a></td>
</tr>
<tr class="even">
<td align="right"><strong>CRAN?</strong></td>
<td align="left"><a href="https://cran.r-project.org/package=adoptr"><img src="https://www.r-pkg.org/badges/version/adoptr" alt="CRAN status" /></a></td>
</tr>
<tr class="odd">
<td align="right"><strong>Bioconductor?</strong></td>
<td align="left">No</td>
</tr>
<tr class="even">
<td align="right"><strong># reverse dependencies</strong></td>
<td align="left">0</td>
</tr>
<tr class="odd">
<td align="right"><strong># Downloads</strong></td>
<td align="left">Only available for R Studio CRAN mirror: [<img src="http://cranlogs.r-pkg.org/badges/last-month/adoptr?color=green" />]</td>
</tr>
<tr class="even">
<td align="right"><strong>Professional Maintainer?</strong></td>
<td align="left">No</td>
</tr>
</tbody>
</table>
</div>
<div id="creating-a-local-validation-report" class="section level2">
<h2><span class="header-section-number">1.2</span> Creating a Local Validation Report</h2>
<p>To validate a local version of <strong>adoptr</strong>, clone the validation report
source reposiotry via</p>
<pre class="sourceCode bash"><code class="sourceCode bash"><span class="fu">git</span> clone https://github.com/kkmann/adoptr-validation-report.git</code></pre>
<p>and switch to the newly created folder</p>
<pre class="sourceCode bash"><code class="sourceCode bash"><span class="bu">cd</span> adoptr-validation-report</code></pre>
<p>To build the book, you will need to install the dependencies listed in the DESCRIPTION file,
i.e.</p>
<pre><code>install.packages(c(&quot;tidyverse, &quot;bookdown&quot;, &quot;rpact&quot;, &quot;testthat&quot;, &quot;pwr&quot;))</code></pre>
<p>before finally beuilding the book by invoking</p>
<pre class="sourceCode bash"><code class="sourceCode bash"><span class="ex">Rscript</span> -e <span class="st">&#39;bookdown::render_book(&quot;index.Rmd&quot;, output_format = &quot;all&quot;)&#39;</span></code></pre>
<p>(or executing the equivalent command in an R terminal in the same folder).
This will produce a <code>_book</code> folder with an <code>index.html</code> file that can be
viewed in a browser as well as the PDF version of the validation
report.</p>
</div>
<div id="validation-scenarios" class="section level2">
<h2><span class="header-section-number">1.3</span> Validation Scenarios</h2>
<div id="scenario-i-large-effect-point-prior" class="section level3">
<h3><span class="header-section-number">1.3.1</span> <a href="scenarioI.html#scenarioI">Scenario I: Large effect, point prior</a></h3>
<p>This is the default scenario.</p>
<ul>
<li><strong>Data distribution:</strong> Two-armed trial with normally distributed test statistic</li>
<li><strong>Prior:</strong> <span class="math inline">\(\delta\sim\delta_{0.4}\)</span></li>
<li><strong>Null hypothesis:</strong> <span class="math inline">\(\mathcal{H}_0:\delta \leq 0\)</span></li>
</ul>
<div id="variant-i.1-minimizing-expected-sample-size-under-the-alternative" class="section level4">
<h4><span class="header-section-number">1.3.1.1</span> <a href="scenarioI.html#variantI_1">Variant I.1: Minimizing Expected Sample Size under the Alternative</a></h4>
<ul>
<li><strong>Objective:</strong> <span class="math inline">\(ESS := \boldsymbol{E}\big[n(X_1)\,|\,\delta=0.4\big]\)</span></li>
<li><strong>Constraints:</strong>
<ol style="list-style-type: decimal">
<li><span class="math inline">\(Power := \boldsymbol{Pr}\big[c_2(X_1) &lt; X_2\,|\,\delta=0.4\big] \geq 0.8\)</span></li>
<li><span class="math inline">\(TOER := \boldsymbol{Pr}\big[c_2(X_1) &lt; X_2\,|\,\delta=0.0\big] \leq 0.025\)</span></li>
<li>Three variants: two-stage, group-sequential, one-stage.</li>
</ol></li>
<li><strong>Formal tests:</strong>
<ol style="list-style-type: decimal">
<li>All three <strong>adoptr</strong> variants (two-stage, group-sequential, one-stage)
comply with constraints. Internally validated by testing vs. simulated
values of the power curve at respective points.</li>
<li><span class="math inline">\(ESS\)</span> of optimal two-stage design is lower than <span class="math inline">\(ESS\)</span> of optimal
group-sequential one and that is in turn lower than the one of the
optimal one-stage design.</li>
<li><span class="math inline">\(ESS\)</span> of optimal group-sequential design is lower than <span class="math inline">\(ESS\)</span> of
externally computed group-sequential design using the <a href="https://rpact.org/">rpact</a> package.</li>
<li>Are the <span class="math inline">\(ESS\)</span> values obtained from simulation the same as the ones
obtained by using numerical integration via <code>adoptr::evaluate</code>?</li>
<li>Is <span class="math inline">\(n()\)</span> of the optimal two-stage design monotonously decreasing on
continuation area?</li>
</ol></li>
</ul>
</div>
<div id="variant-i.2-minimizing-expected-sample-size-under-the-null-hypothesis" class="section level4">
<h4><span class="header-section-number">1.3.1.2</span> <a href="scenarioI.html#variantI_2">Variant I.2: Minimizing Expected Sample Size under the Null Hypothesis</a></h4>
<ul>
<li><strong>Objective:</strong> <span class="math inline">\(ESS := \boldsymbol{E}\big[n(X_1)\,|\,\color{red}{\delta=0.0}\big]\)</span></li>
<li><strong>Constraints:</strong>
<ol style="list-style-type: decimal">
<li><span class="math inline">\(Power := \boldsymbol{Pr}\big[c_2(X_1) &lt; X_2\,|\,\delta=0.4\big] \geq 0.8\)</span></li>
<li><span class="math inline">\(TOER := \boldsymbol{Pr}\big[c_2(X_1) &lt; X_2\,|\,\delta=0.0\big] \leq 0.025\)</span></li>
</ol></li>
<li><strong>Formal tests:</strong>
<ol style="list-style-type: decimal">
<li>Validate constraint compliance by testing vs. simulated
values of the power curve at respective points.</li>
<li><span class="math inline">\(n()\)</span> of optimal design is monotonously increasing on continuation area.</li>
<li><span class="math inline">\(ESS\)</span> of optimal two-stage design is lower than <span class="math inline">\(ESS\)</span> of externally
computed group-sequential design using the <a href="https://rpact.org/">rpact</a> package.</li>
<li>Are the <span class="math inline">\(ESS\)</span> values obtained from simulation the same as the ones
obtained by using numerical integration via <code>adoptr::evaluate</code>?</li>
</ol></li>
</ul>
</div>
<div id="variant-i.3-condtional-power-constraint" class="section level4">
<h4><span class="header-section-number">1.3.1.3</span> <a href="scenarioI.html#variantI_3">Variant I.3: Condtional Power Constraint</a></h4>
<ul>
<li><strong>Objective:</strong> <span class="math inline">\(ESS := \boldsymbol{E}\big[n(X_1)\,|\,\delta=0.4\big]\)</span></li>
<li><strong>Constraints:</strong>
<ol style="list-style-type: decimal">
<li><span class="math inline">\(Power := \boldsymbol{Pr}\big[c_2(X_1) &lt; X_2\,|\,\delta=0.4\big] \geq 0.8\)</span></li>
<li><span class="math inline">\(TOER := \boldsymbol{Pr}\big[c_2(X_1) &lt; X_2\,|\,\delta=0.0\big] \leq 0.025\)</span></li>
<li><span class="math inline">\(CP := \color{red}{\boldsymbol{Pr}\big[c_2(X_1) &lt; X_2\,|\,\delta=0.4, X_1 = x_1\big] \geq 0.7}\)</span> for all <span class="math inline">\(x_1\in(c_1^f, c_1^e)\)</span></li>
</ol></li>
<li><strong>Formal tests:</strong>
<ol style="list-style-type: decimal">
<li>Check <span class="math inline">\(Power\)</span> and <span class="math inline">\(TOER\)</span> constraints with simulation.
Check <span class="math inline">\(CP\)</span> constraint on three different values of <span class="math inline">\(x_1\)</span> in
<span class="math inline">\((c_1^f, c_1^e)\)</span></li>
<li>Are the <span class="math inline">\(CP\)</span> values at the three test-pivots obtained from simulation the
same as the ones obtained by using numerical integration via
<code>adoptr::evaluate</code>?</li>
<li>Is <span class="math inline">\(ESS\)</span> of optimal two-stage design with <span class="math inline">\(CP\)</span> constraint higher than
<span class="math inline">\(ESS\)</span> of optimal two-stage design without this constraint?</li>
</ol></li>
</ul>
</div>
</div>
<div id="scenario-ii-large-effect-gaussian-prior" class="section level3">
<h3><span class="header-section-number">1.3.2</span> <a href="scenarioII.html#scenarioII">Scenario II: Large effect, Gaussian prior</a></h3>
<p>Similar in scope to Scenario I, but with a continuous Gaussian prior on <span class="math inline">\(\delta\)</span>.</p>
<ul>
<li><strong>Data distribution:</strong> Two-armed trial with normally distributed test statistic</li>
<li><strong>Prior:</strong> <span class="math inline">\(\delta\sim\mathcal{N}(0.4, .3)\)</span></li>
<li><strong>Null hypothesis:</strong> <span class="math inline">\(\mathcal{H}_0:\delta \leq 0\)</span></li>
</ul>
<div id="variant-ii.1-minimizing-expected-sample-size" class="section level4">
<h4><span class="header-section-number">1.3.2.1</span> <a href="scenarioII.html#variantII_1">Variant II.1: Minimizing Expected Sample Size</a></h4>
<ul>
<li><strong>Objective:</strong> <span class="math inline">\(ESS := \boldsymbol{E}\big[n(X_1)\big]\)</span></li>
<li><strong>Constraints:</strong>
<ol style="list-style-type: decimal">
<li><span class="math inline">\(Power := \boldsymbol{Pr}\big[c_2(X_1) &lt; X_2\,|\,\delta&gt; 0.0\big] \geq 0.8\)</span></li>
<li><span class="math inline">\(TOER := \boldsymbol{Pr}\big[c_2(X_1) &lt; X_2\,|\,\delta=0.0\big] \leq 0.025\)</span></li>
<li>Three variants: two-stage, group-sequential, one-stage.</li>
</ol></li>
<li><strong>Formal tests:</strong>
<ol style="list-style-type: decimal">
<li>All designs comply with type one error rate constraints (tested via
simulation).</li>
<li><span class="math inline">\(ESS\)</span> of optimal two-stage design is lower than <span class="math inline">\(ESS\)</span> of optimal
group-sequential one and that is in turn lower than the one of the
optimal one-stage design.</li>
</ol></li>
</ul>
</div>
<div id="variant-ii.2-minimizing-expected-sample-size-under-the-null-hypothesis" class="section level4">
<h4><span class="header-section-number">1.3.2.2</span> <a href="scenarioII.html#variantII_2">Variant II.2: Minimizing Expected Sample Size under the Null hypothesis</a></h4>
<ul>
<li><strong>Objective:</strong> <span class="math inline">\(ESS := \boldsymbol{E}\big[n(X_1)\,|\,\color{red}{\delta\leq 0}\big]\)</span></li>
<li><strong>Constraints:</strong>
<ol style="list-style-type: decimal">
<li><span class="math inline">\(Power := \boldsymbol{Pr}\big[c_2(X_1) &lt; X_2\,|\,\delta&gt; 0.0\big] \geq 0.8\)</span></li>
<li><span class="math inline">\(TOER := \boldsymbol{Pr}\big[c_2(X_1) &lt; X_2\,|\,\delta=0.0\big] \leq 0.025\)</span></li>
</ol></li>
<li><strong>Formal tests:</strong>
<ol style="list-style-type: decimal">
<li>Does the design comply with <span class="math inline">\(TOER\)</span> constraint (via simulation)?</li>
<li>Check <span class="math inline">\(CP\)</span> constraint on three different values of <span class="math inline">\(x_1\)</span> in
<span class="math inline">\((c_1^f, c_1^e)\)</span></li>
<li>Is <span class="math inline">\(ESS\)</span> lower than expected sample size under the null hypothesis
for the optimal two stage design from Variant II-1?</li>
</ol></li>
</ul>
</div>
<div id="variant-ii.3-condtional-power-constraint" class="section level4">
<h4><span class="header-section-number">1.3.2.3</span> <a href="scenarioII.html#variantII_3">Variant II.3: Condtional Power Constraint</a></h4>
<ul>
<li><strong>Objective:</strong> <span class="math inline">\(ESS := \boldsymbol{E}\big[n(X_1)\big]\)</span></li>
<li><strong>Constraints:</strong>
<ol style="list-style-type: decimal">
<li><span class="math inline">\(Power := \boldsymbol{Pr}\big[c_2(X_1) &lt; X_2\,|\,\delta&gt;0.0\big] \geq 0.8\)</span></li>
<li><span class="math inline">\(TOER := \boldsymbol{Pr}\big[c_2(X_1) &lt; X_2\,|\,\delta=0.0\big] \leq 0.025\)</span></li>
<li><span class="math inline">\(CP := \color{red}{\boldsymbol{Pr}\big[c_2(X_1) &lt; X_2\,|\,\delta&gt; 0.0, X_1 = x_1\big] \geq 0.7}\)</span>
for all <span class="math inline">\(x_1\in(c_1^f, c_1^e)\)</span></li>
</ol></li>
<li><strong>Formal tests:</strong>
<ol style="list-style-type: decimal">
<li>Check <span class="math inline">\(TOER\)</span> constraint with simulation.
Check <span class="math inline">\(CP\)</span> constraint on three different values of <span class="math inline">\(x_1\)</span> in
<span class="math inline">\((c_1^f, c_1^e)\)</span></li>
<li>Is <span class="math inline">\(ESS\)</span> of optimal two-stage design with <span class="math inline">\(CP\)</span> constraint higher than
<span class="math inline">\(ESS\)</span> of optimal two-stage design without the constraint?</li>
</ol></li>
</ul>
</div>
</div>
<div id="scenario-iii-large-effect-uniform-prior" class="section level3">
<h3><span class="header-section-number">1.3.3</span> <a href="scenarioIII.html#scenarioIII">Scenario III: Large effect, uniform prior</a></h3>
<ul>
<li><strong>Data distribution:</strong> Two-armed trial with normally distributed test statistic</li>
<li><strong>Prior:</strong> sequence of uniform distributions
<span class="math inline">\(\delta\sim\operatorname{Unif}(0.4 - \Delta_i, 0.4 + \Delta_i)\)</span>
around <span class="math inline">\(0.4\)</span> with <span class="math inline">\(\Delta_i=(3 - i)/10\)</span> for <span class="math inline">\(i=0\ldots 3\)</span>.
I.e., for <span class="math inline">\(\Delta_3=0\)</span> reduces to a point prior on <span class="math inline">\(\delta=0.4\)</span>.</li>
<li><strong>Null hypothesis:</strong> <span class="math inline">\(\mathcal{H}_0:\delta \leq 0\)</span></li>
</ul>
<div id="variant-iii.1-convergence-under-prior-concentration" class="section level4">
<h4><span class="header-section-number">1.3.3.1</span> <a href="scenarioIII.html#variantIII_1">Variant III.1: Convergence under Prior Concentration</a></h4>
<ul>
<li><strong>Objective:</strong> <span class="math inline">\(ESS := \boldsymbol{E}\big[n(X_1)\big]\)</span></li>
<li><strong>Constraints:</strong>
<ol style="list-style-type: decimal">
<li><span class="math inline">\(Power := \boldsymbol{Pr}\big[c_2(X_1) &lt; X_2\,|\,\delta&gt;0.0\big] \geq 0.8\)</span></li>
<li><span class="math inline">\(TOER := \boldsymbol{Pr}\big[c_2(X_1) &lt; X_2\,|\,\delta=0.0\big] \leq 0.025\)</span></li>
</ol></li>
<li><strong>Formal tests:</strong>
<ol style="list-style-type: decimal">
<li>Simulated type one error rate is compared to <span class="math inline">\(TOER\)</span> constraint for each
design.</li>
<li>Number of iterations are checked agaist default maximum to ensure proper
convergence.</li>
<li><span class="math inline">\(ESS\)</span> decreases with prior variance.</li>
</ol></li>
</ul>
<p>Additionally, the designs are compared graphically.
Inspect the plot to see convergence pattern.</p>
</div>
</div>
<div id="scenario-iv-smaller-effect-size-larger-trials" class="section level3">
<h3><span class="header-section-number">1.3.4</span> <a href="scenarioIV.html#scenarioIV">Scenario IV: Smaller effect size, larger trials</a></h3>
<div id="variant-iv.1-minimizing-expected-sample-size-under-the-alternative" class="section level4">
<h4><span class="header-section-number">1.3.4.1</span> <a href="scenarioIV.html#variantIV_1">Variant IV.1: Minimizing Expected Sample Size under the Alternative</a></h4>
<ul>
<li><strong>Objective:</strong> <span class="math inline">\(ESS := \boldsymbol{E}\big[n(X_1)\,|\,\delta=0.2\big]\)</span></li>
<li><strong>Constraints:</strong>
<ol style="list-style-type: decimal">
<li><span class="math inline">\(Power := \boldsymbol{Pr}\big[c_2(X_1) &lt; X_2\,|\,\delta=0.2\big] \geq 0.8\)</span></li>
<li><span class="math inline">\(TOER := \boldsymbol{Pr}\big[c_2(X_1) &lt; X_2\,|\,\delta=0.0\big] \leq 0.025\)</span></li>
<li>Three variants: two-stage, group-sequential, one-stage.</li>
</ol></li>
<li><strong>Formal tests:</strong>
<ol style="list-style-type: decimal">
<li>All three adoptr variants (two-stage, group-sequential, one-stage)
comply with costraints. Internally validated by testing vs. simulated
values of the power curve at respective points.</li>
<li><span class="math inline">\(ESS\)</span> of optimal two-stage design is lower than <span class="math inline">\(ESS\)</span> of optimal
group-sequential one and that is in tunr lower than the one of the
optimal one-stage design.</li>
<li><span class="math inline">\(ESS\)</span> of optimal group-sequential design is lower than <span class="math inline">\(ESS\)</span> of
externally computed group-sequential design using the <a href="https://rpact.org/">rpact</a> package.</li>
<li>Are the <span class="math inline">\(ESS\)</span> values obtained from simulation the same as the ones
obtained by using numerical integration via <code>adoptr::evaluate</code>?</li>
<li>Is <span class="math inline">\(n()\)</span> of the optimal two-stage design monotonously decreasing on
continuation area?</li>
</ol></li>
</ul>
</div>
<div id="variant-iv.2-increasing-power" class="section level4">
<h4><span class="header-section-number">1.3.4.2</span> <a href="scenarioIV.html#variantIV_2">Variant IV.2: Increasing Power</a></h4>
<ul>
<li><strong>Objective:</strong> <span class="math inline">\(ESS := \boldsymbol{E}\big[n(X_1)\,|\,\delta=0.2\big]\)</span></li>
<li><strong>Constraints:</strong>
<ol style="list-style-type: decimal">
<li><span class="math inline">\(Power := \boldsymbol{Pr}\big[c_2(X_1) &lt; X_2\,|\,\delta=0.2\big] \geq \color{red}{0.9}\)</span></li>
<li><span class="math inline">\(TOER := \boldsymbol{Pr}\big[c_2(X_1) &lt; X_2\,|\,\delta=0.0\big] \leq 0.025\)</span></li>
<li>Three variants: two-stage, group-sequential, one-stage.</li>
</ol></li>
<li><strong>Formal tests:</strong>
<ol style="list-style-type: decimal">
<li>Does the design respect all constraints (via simulation)?</li>
<li><span class="math inline">\(ESS\)</span> of optimal two-stage design is lower than <span class="math inline">\(ESS\)</span> of optimal
group-sequential one and that is in tunr lower than the one of the
optimal one-stage design.</li>
<li><span class="math inline">\(ESS\)</span> of optimal group-sequential design is lower than <span class="math inline">\(ESS\)</span> of
externally computed group-sequential design using the <a href="https://rpact.org/">rpact</a> package.</li>
<li>Are the <span class="math inline">\(ESS\)</span> values obtained from simulation the same as the ones
obtained by using numerical integration via <code>adoptr::evaluate</code>?</li>
<li>Is <span class="math inline">\(n()\)</span> of the optimal two-stage design monotonously decreasing on
continuation area?</li>
</ol></li>
</ul>
</div>
<div id="variant-iv.3-increasing-maximal-type-one-error-rate" class="section level4">
<h4><span class="header-section-number">1.3.4.3</span> <a href="scenarioIV.html#variantIV_3">Variant IV.3: Increasing Maximal Type One Error Rate</a></h4>
<ul>
<li><strong>Objective:</strong> <span class="math inline">\(ESS := \boldsymbol{E}\big[n(X_1)\,|\,\delta=0.2\big]\)</span></li>
<li><strong>Constraints:</strong>
<ol style="list-style-type: decimal">
<li><span class="math inline">\(Power := \boldsymbol{Pr}\big[c_2(X_1) &lt; X_2\,|\,\delta=0.2\big] \geq 0.8\)</span></li>
<li><span class="math inline">\(TOER := \boldsymbol{Pr}\big[c_2(X_1) &lt; X_2\,|\,\delta=0.0\big] \leq \color{red}{0.05}\)</span></li>
<li>Three variants: two-stage, group-sequential, one-stage.</li>
</ol></li>
<li><strong>Formal tests:</strong>
<ol style="list-style-type: decimal">
<li>Does the design respect all constraints (via simulation)?</li>
<li><span class="math inline">\(ESS\)</span> of optimal two-stage design is lower than <span class="math inline">\(ESS\)</span> of optimal
group-sequential one and that is in tunr lower than the one of the
optimal one-stage design.</li>
<li><span class="math inline">\(ESS\)</span> of optimal group-sequential design is lower than <span class="math inline">\(ESS\)</span> of
externally computed group-sequential design using the <a href="https://rpact.org/">rpact</a> package.</li>
<li>Are the <span class="math inline">\(ESS\)</span> values obtained from simulation the same as the ones
obtained by using numerical integration via <code>adoptr::evaluate</code>?</li>
<li>Is <span class="math inline">\(n()\)</span> of the optimal two-stage design monotonously decreasing on
continuation area?</li>
</ol></li>
</ul>
</div>
</div>
<div id="scenario-v-single-arm-design-medium-effect-size" class="section level3">
<h3><span class="header-section-number">1.3.5</span> <a href="scenarioV.html#scenarioV">Scenario V: Single-arm design, medium effect size</a></h3>
<ul>
<li><strong>Data distribution:</strong>  trial with normally distributed test statistic</li>
<li><strong>Prior:</strong> <span class="math inline">\(\delta\sim\delta_{0.3}\)</span></li>
<li><strong>Null hypothesis:</strong> <span class="math inline">\(\mathcal{H}_0:\delta \leq 0\)</span></li>
</ul>
<div id="variant-v.1-sensitivity-to-integration-order" class="section level4">
<h4><span class="header-section-number">1.3.5.1</span> <a href="scenarioV.html#variantV_1">Variant V.1: Sensitivity to Integration Order</a></h4>
<ul>
<li><strong>Objective:</strong> <span class="math inline">\(ESS := \boldsymbol{E}\big[n(X_1)\,|\,\delta=0.3\big]\)</span></li>
<li><strong>Constraints:</strong>
<ol style="list-style-type: decimal">
<li><span class="math inline">\(Power := \boldsymbol{Pr}\big[c_2(X_1) &lt; X_2\,|\,\color{red}{\delta=0.3}\big] \geq 0.8\)</span></li>
<li><span class="math inline">\(TOER := \boldsymbol{Pr}\big[c_2(X_1) &lt; X_2\,|\,\delta=0.0\big] \leq 0.025\)</span></li>
<li>Three variants: integration order 5, 8, 11 two-stage designs.</li>
</ol></li>
<li><strong>Formal tests:</strong>
<ol style="list-style-type: decimal">
<li>Do all designs respect all constraints (via simulation)?</li>
<li>Do all designs converge within the respective iteration limit?</li>
<li>Does constraint compliance get better with increased order?</li>
<li>Does the simulated <span class="math inline">\(ESS\)</span> get better with increased order?</li>
</ol></li>
</ul>
</div>
<div id="variant-v.2-utility-maximization" class="section level4">
<h4><span class="header-section-number">1.3.5.2</span> <a href="scenarioV.html#variantV_2">Variant V.2: Utility Maximization</a></h4>
<ul>
<li><strong>Objective:</strong> <span class="math inline">\(\lambda\, Power - ESS := \lambda\, \boldsymbol{Pr}\big[c_2(X_1) &lt; X_2\,|\,\delta=0.3\big] - \boldsymbol{E}\big[n(X_1)\,|\,\delta=0.3\big].\)</span>
for <span class="math inline">\(\lambda = 100\)</span> and <span class="math inline">\(200\)</span></li>
<li><strong>Constraints:</strong>
<ol style="list-style-type: decimal">
<li><span class="math inline">\(TOER := \boldsymbol{Pr}\big[c_2(X_1) &lt; X_2\,|\,\delta=0.0\big] \leq 0.025\)</span></li>
</ol></li>
<li><strong>Formal tests:</strong>
<ol style="list-style-type: decimal">
<li>Do both desings respect the type one error rate constraint (via simulation)?</li>
<li>Is the power of the design with larger <span class="math inline">\(\lambda\)</span> larger?</li>
</ol></li>
</ul>
</div>
<div id="variant-v.3-n_1-penalty" class="section level4">
<h4><span class="header-section-number">1.3.5.3</span> <a href="scenarioV.html#variantV_3">Variant V.3: <span class="math inline">\(n_1\)</span> penalty</a></h4>
<ul>
<li><strong>Objective:</strong> <span class="math inline">\(ESS := \boldsymbol{E}\big[n(X_1)\,|\,\delta=0.3\big] + \lambda \, n_1\)</span>
for <span class="math inline">\(\lambda = 0.05\)</span> and <span class="math inline">\(0.2\)</span>.</li>
<li><strong>Constraints:</strong>
<ol style="list-style-type: decimal">
<li><span class="math inline">\(TOER := \boldsymbol{Pr}\big[c_2(X_1) &lt; X_2\,|\,\delta=0.0\big] \leq 0.025\)</span></li>
<li><span class="math inline">\(Power := \boldsymbol{Pr}\big[c_2(X_1) &lt; X_2\,|\,\delta=0.3\big] \geq 0.8\)</span></li>
</ol></li>
<li><strong>Formal tests:</strong>
<ol style="list-style-type: decimal">
<li>Is <span class="math inline">\(n_1\)</span> for the optimal design smaller than the order-5 design in V.1?</li>
</ol></li>
</ul>
</div>
<div id="variant-v.4-n_2-penalty" class="section level4">
<h4><span class="header-section-number">1.3.5.4</span> <a href="scenarioV.html#variantV_4">Variant V.4: <span class="math inline">\(n_2\)</span> penalty</a></h4>
<ul>
<li><strong>Objective:</strong> <span class="math inline">\(ESS := \boldsymbol{E}\big[n(X_1)\,|\,\delta=0.3\big] + \lambda\)</span> <code>AverageN2</code>
for <span class="math inline">\(\lambda = 0.01\)</span> and <span class="math inline">\(0.1\)</span>.</li>
<li><strong>Constraints:</strong>
<ol style="list-style-type: decimal">
<li><span class="math inline">\(TOER := \boldsymbol{Pr}\big[c_2(X_1) &lt; X_2\,|\,\delta=0.0\big] \leq 0.025\)</span></li>
<li><span class="math inline">\(Power := \boldsymbol{Pr}\big[c_2(X_1) &lt; X_2\,|\,\delta=0.3\big] \geq 0.8\)</span></li>
</ol></li>
<li><strong>Formal tests:</strong>
<ol style="list-style-type: decimal">
<li>Is the <code>AverageN2</code> for the optimal design smaller than for the order-5
design in V.1?</li>
</ol></li>
</ul>
</div>
</div>
</div>
<div id="technical-setup" class="section level2">
<h2><span class="header-section-number">1.4</span> Technical Setup</h2>
<p>All scenarios are run in a single, shared R session.
Required packages are loaded here <em>ToDo: make sure that is the case!</em>,
the random see is defined and set centrally, and the default number
of iteration is increased to make sure that all scenarios
converge properly.
Additionally R scripts with convenience functions are sourced here as well <em>ToDo: descibe or eliminate these functions!</em>.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(adoptr)
<span class="kw">library</span>(tidyverse)</code></pre>
<pre><code>## ── Attaching packages ────────────────────────────────── tidyverse 1.2.1 ──</code></pre>
<pre><code>## ✔ ggplot2 3.1.0       ✔ purrr   0.3.2  
## ✔ tibble  2.1.1       ✔ dplyr   0.8.0.1
## ✔ tidyr   0.8.3       ✔ stringr 1.4.0  
## ✔ readr   1.3.1       ✔ forcats 0.4.0</code></pre>
<pre><code>## ── Conflicts ───────────────────────────────────── tidyverse_conflicts() ──
## ✖ dplyr::filter() masks stats::filter()
## ✖ dplyr::lag()    masks stats::lag()
## ✖ dplyr::n()      masks adoptr::n()</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="co"># load custom functions in folder subfolder &#39;/R&#39;</span>
<span class="cf">for</span> (nm <span class="cf">in</span> <span class="kw">list.files</span>(<span class="st">&quot;R&quot;</span>, <span class="dt">pattern =</span> <span class="st">&quot;</span><span class="ch">\\</span><span class="st">.[RrSsQq]$&quot;</span>))
   <span class="kw">source</span>(<span class="kw">file.path</span>(<span class="st">&quot;R&quot;</span>, nm))

<span class="co"># define seed value</span>
seed &lt;-<span class="st"> </span><span class="dv">42</span>

<span class="co"># define custom tolerance and iteration limit for nloptr</span>
opts =<span class="st"> </span><span class="kw">list</span>(
    <span class="dt">algorithm =</span> <span class="st">&quot;NLOPT_LN_COBYLA&quot;</span>,
    <span class="dt">xtol_rel  =</span> <span class="fl">1e-5</span>,
    <span class="dt">maxeval   =</span> <span class="dv">100000</span>
)</code></pre>

</div>
</div>
            </section>

          </div>
        </div>
      </div>

<a href="scenarioI.html" class="navigation navigation-next navigation-unique" aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/kkmann/adoptr-validation-report/edit/master/index.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"download": ["adoptr-validation-report.pdf"],
"toc": {
"collapse": "section"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:" && /^https?:/.test(src))
      src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
